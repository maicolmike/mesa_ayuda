{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="container">
    <div class="card shadow table-responsive">
        <div class="card-body table-responsive">
          {% include 'messages.html' %}
            <h4 style="text-align: center;"><b>Listado de usuarios</b></h4>
            <table id="example1" class="table table-bordered table-hover">
                <thead class="table-secondary">
                    <tr>
                        <th class="sorting sorting_asc">Id</th>
                        <th>Identificacion</th>
                        <th>Nombres</th>
                        <th>Usuario</th>
                        <th>Agencia</th>
                        <th>Email</th>
                        <th style="width: 140px;">Tipo usuario</th>
                        <th>Editar</th>
                        <th>Clave</th>
                        <th>Borrar</th>
                    </tr>
                </thead>
                <tbody>
                {% for usuarios in lista_usuarios %}
                    <tr>
                        <td>{{ usuarios.id }}</td>
                        <td>{{ usuarios.identificacion }}</td>
                        <td>{{ usuarios.nombres }}</td>
                        <td>{{ usuarios.username }}</td>
                        <td>{{ usuarios.agencia }}</td>
                        <td>{{ usuarios.email }}</td>
                        {% if usuarios.is_superuser == 1 %}
                          <td>Administrador</td>
                        {% else %}
                          <td>Cliente</td>
                        {% endif %}
                        <td>
                          <a href="#" class="btn btn-info fa-solid fa-pen-to-square" data-bs-toggle="modal" data-bs-target="#modalEditar{{ usuarios.id }}"></a>
                        </td>
                        <td>
                          <a href="#" class="btn btn-success fa-solid fa-calendar-check" data-bs-toggle="modal" data-bs-target="#modalClave{{ usuarios.id }}"></a>
                        </td>
                        <td>
                          <a href="#" class="btn btn-danger fa-solid fa-trash-can" data-bs-toggle="modal" data-bs-target="#modalEliminar{{ usuarios.id }}"></a>
                        </td>
                    </tr>
                    {% include 'users/modalEditar.html' %}
                    {% include 'users/modalClave.html' %}
                    {% include 'users/modalEliminar.html' %}
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Codigo para libreria adminLte funcione el proceso de busqueda del datatable-->
<script>
    $(function () {
      $("#example1").DataTable({
        "responsive": true,
        "lengthChange": false,
        "autoWidth": false,
        "lengthMenu": [10, 25, 100],
        "pageLength": 5,
        "language": {
          "sProcessing": "Procesando...",
          "sLengthMenu": "Mostrar _MENU_ registros",
          "sZeroRecords": "No se encontraron resultados",
          "sEmptyTable": "Ningún dato disponible en esta tabla",
          "sInfo": "_START_ al _END_ de _TOTAL_ registros",
          "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
          "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
          "sInfoPostFix": "",
          "sSearch": "Buscar:",
          "sUrl": "",
          "sInfoThousands": ",",
          "sLoadingRecords": "Cargando...",
          "oPaginate": {
            "sFirst": "Primero",
            "sLast": "Último",
            "sNext": "Siguiente",
            "sPrevious": "Anterior"
          },
          "oAria": {
            "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
            "sSortDescending": ": Activar para ordenar la columna de manera descendente"
          }
        }
      });
    });
</script>

{% endblock %}
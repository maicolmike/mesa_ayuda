{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="container">
    <div class="card shadow table-responsive">
        <div class="card-body table-responsive">
            <h4 style="text-align: center;"><b>Listado de usuarios</b></h4>
            <table id="example1" class="table table-bordered table-hover">
                <thead class="table-secondary">
                    <tr>
                        <th class="sorting sorting_asc">Id</th>
                        <th>Identificacion</th>
                        <th>Nombres</th>
                        <th>Usuario</th>
                        <th>Agencia</th>
                        <th>Email</th>
                        <th>Tipo de usuario</th>
                        <th>Editar</th>
                        <th>Clave</th>
                        <th>Borrar</th>
                    </tr>
                </thead>
                <tbody>
                <!-- inicio for -->
                <!-- Iterar sobre la lista de asociados PEP -->
                {% for usuarios in lista_usuarios %}
                    <tr>
                        <td>{{ usuarios.id }}</td> <!-- id-->
                        <td>{{ usuarios.identificacion }}</td> <!--username-->
                        <td>{{ usuarios.nombres }}</td> <!--username-->
                        <td>{{ usuarios.username }}</td> <!-- id-->
                        <td>{{ usuarios.agencia }}</td> <!--username-->
                        <td>{{ usuarios.email }}</td> <!--username-->
                        <!-- valido si el tipo de usuario es 1 me muestre administrador sino cliente-->
                      {% if usuarios.is_superuser == 1 %}
                      <td>Administrador</td>
                      {% else %}
                      <td>Cliente</td>
                      {% endif %}
                      <td><a href="" class="btn btn-info fa-solid fa-pen-to-square" id="btn-edit{{ usuarios.id }}" data-toggle="modal" data-target="#modal{{ usuarios.id }}"></a></td>
                      <td><a href="" class="btn btn-success fa-solid fa-calendar-check" id="btn-cambiar{{ usuarios.id }}" data-toggle="modal" data-target="#modal2{{ usuarios.id }}"></a></td>
                      <td><a href="" class="btn btn-danger fa-solid fa-trash-can" id="btn-eliminar{{ usuarios.id }}" data-toggle="modal" data-target="#modal3{{ usuarios.id }}"></a></td>
                    </tr>
                    {% endfor %}
                <!-- Final for -->
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Codigo para libreria adminLte funcione el proceso de busqueda del datatable-->
<script>
    $(function () {
      $("#example1").DataTable({
        "responsive": true,
        "lengthChange": false,
        "autoWidth": false,
        "lengthMenu": [10, 25, 100],
        "pageLength": 5,
        "language": {
          "sProcessing": "Procesando...",
          "sLengthMenu": "Mostrar _MENU_ registros",
          "sZeroRecords": "No se encontraron resultados",
          "sEmptyTable": "Ningún dato disponible en esta tabla",
          "sInfo": "_START_ al _END_ de _TOTAL_ registros",
          "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
          "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
          "sInfoPostFix": "",
          "sSearch": "Buscar:",
          "sUrl": "",
          "sInfoThousands": ",",
          "sLoadingRecords": "Cargando...",
          "oPaginate": {
            "sFirst": "Primero",
            "sLast": "Último",
            "sNext": "Siguiente",
            "sPrevious": "Anterior"
          },
          "oAria": {
            "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
            "sSortDescending": ": Activar para ordenar la columna de manera descendente"
          }
        }
      }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
    });
</script>

{% endblock %}